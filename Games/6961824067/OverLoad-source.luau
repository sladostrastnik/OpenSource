-- !!! ts script was generated by ChatGPT !!!
-- [[ VERSION v12.2.5 - INTEGRATED PROTECTIONS ]]

local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")
local Players = game:GetService("Players")
local LP = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Debris = game:GetService("Debris")
local mouse = LP:GetMouse()

-- ==========================================
-- 1. L'INTRO COSMIC STRIKE (CONSERVГ‰E)
-- ==========================================
local Music = Instance.new("Sound", LP.PlayerGui)
Music.SoundId = "rbxassetid://11532132338"
Music.Volume = 1
local Blur = Instance.new("BlurEffect", Lighting)
Blur.Size = 0
local ColorCorr = Instance.new("ColorCorrectionEffect", Lighting)
ColorCorr.TintColor = Color3.fromRGB(0, 255, 100)

local ScreenGui = Instance.new("ScreenGui", LP.PlayerGui)
local BinaryContainer = Instance.new("Frame", ScreenGui)
BinaryContainer.Size = UDim2.new(1, 0, 1, 0)
BinaryContainer.BackgroundTransparency = 1

local function CreateDenseBinary()
    task.spawn(function()
        local Label = Instance.new("TextLabel", BinaryContainer)
        Label.Size = UDim2.new(0, 40, 0, 40)
        Label.Position = UDim2.new(math.random(), 0, -0.2, 0)
        Label.BackgroundTransparency = 1
        Label.TextColor3 = Color3.fromRGB(0, 255, 100)
        Label.TextSize = math.random(25, 45)
        Label.Font = Enum.Font.Code
        Label.Text = math.random(0, 1)
        Label.TextStrokeTransparency = 0.5
        local fallTime = math.random(0.5, 1.5)
        local tween = TweenService:Create(Label, TweenInfo.new(fallTime, Enum.EasingStyle.Linear), {
            Position = UDim2.new(Label.Position.X.Scale, 0, 1.2, 0)
        })
        tween:Play()
        tween.Completed:Wait()
        Label:Destroy()
    end)
end

Music:Play()
Blur.Size = 20
for i = 1, 150 do
    CreateDenseBinary()
    if i > 100 then task.wait(0.01) else task.wait(0.03) end
end
task.wait(0.5)
local Flash = Instance.new("ColorCorrectionEffect", Lighting)
Flash.Brightness = 10
Flash.TintColor = Color3.fromRGB(255, 255, 255)
Music:Stop()
ScreenGui:Destroy()
Blur:Destroy()
ColorCorr:Destroy()
TweenService:Create(Flash, TweenInfo.new(0.5, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Brightness = 0}):Play()
task.delay(0.6, function() Flash:Destroy() end)

-- ==========================================
-- 2. SETUP & GLOBALS
-- ==========================================
setclipboard("https://linkvertise.com/3529018/8azhAcgnKA9b?o=sharing")

local success, Rayfield = pcall(function()
    return loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
end)

if not success or not Rayfield then return end

-- [[ VARIABLES GLOBALES ]]
_G.AttackSpeed = 0.05
_G.WhitelistEnabled = false
_G.SuperFlingEnabled = true
_G.FlingStrength = 850

-- Variables Protection (Issues de ton code prГ©cГ©dent)
local v79_AntiGrab = false
local v84_AntiExplode = false
local antiLagT = false
local v14_AntiBlobman = false
local v64_Gucci = {enabled = false, ragdollConn = nil, posCheckConn = nil}
local FLING_VELOCITY_NAME = "FlingVelocity"

-- ==========================================
-- 3. MOTEURS DE JEU (LOGIQUE COMBAT)
-- ==========================================

workspace.ChildAdded:Connect(function(child)
    if child.Name == "GrabParts" then
        local success, grabPart = pcall(function()
            return child:WaitForChild("GrabPart", 2):WaitForChild("WeldConstraint", 2).Part1
        end)
        if not success or not grabPart then return end
        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.Name = FLING_VELOCITY_NAME
        bodyVelocity.Parent = grabPart
        local connection
        connection = child:GetPropertyChangedSignal("Parent"):Connect(function()
            if child.Parent == nil then
                if _G.SuperFlingEnabled then
                    bodyVelocity.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
                    bodyVelocity.Velocity = workspace.CurrentCamera.CFrame.LookVector * _G.FlingStrength
                    Debris:AddItem(bodyVelocity, 1)
                else
                    bodyVelocity.MaxForce = Vector3.new(0, 0, 0)
                    Debris:AddItem(bodyVelocity, 1)
                end
                if connection then connection:Disconnect() end
            end
        end)
    end
end)

-- ==========================================
-- 4. INTERFACE RAYFIELD
-- ==========================================
local Window = Rayfield:CreateWindow({
    Name = "рџџў OVERLOAD v1.0.1 BETA VERSION",
    LoadingTitle = "IS JUST BETA VERSION",
    LoadingSubtitle = "Loading",
    Theme = "Green",
    KeySystem = true,
    KeySettings = { Title = "OverLoad Key", Key = {"PassedOverLoad"} }
})

local CombatTab = Window:CreateTab("вљ”пёЏ Fight", 4483362458)
local ProtTab = Window:CreateTab("рџ›ЎпёЏ Protections", 4483362458)

-- --- ONGLET COMBAT ---
CombatTab:CreateSection("Fling & Kill")

CombatTab:CreateToggle({
    Name = "Super Fling",
    CurrentValue = true,
    Flag = "FlingToggle",
    Callback = function(Value) _G.SuperFlingEnabled = Value end
})

CombatTab:CreateSlider({
    Name = "Fling Strength",
    Range = {100, 5000},
    Increment = 50,
    CurrentValue = 850,
    Flag = "FlingPower",
    Callback = function(Value) _G.FlingStrength = Value end
})

-- --- ONGLET PROTECTIONS (TES SCRIPTS AJOUTГ‰S) ---

ProtTab:CreateSection("Anti-EntitГ©s")

ProtTab:CreateToggle({
    Name = "Anti Blobman",
    CurrentValue = false,
    Callback = function(Value)
        v14_AntiBlobman = Value
        if v14_AntiBlobman then
            task.spawn(function()
                while v14_AntiBlobman do
                    local char = LP.Character
                    if char and char:FindFirstChild("HumanoidRootPart") then
                        for _, v in pairs(workspace:GetDescendants()) do
                            if v:IsA("BasePart") and (v.Name == "LeftDetector" or v.Name == "RightDetector") then
                                if (char.HumanoidRootPart.Position - v.Position).Magnitude > 10 then v:Destroy() end
                            end
                        end
                    end
                    task.wait(1)
                end
            end)
        end
    end
})

ProtTab:CreateSection("Anti")

ProtTab:CreateToggle({
    Name = "Anti Grab рџ’Є",
    CurrentValue = false,
    Callback = function(Value)
        v79_AntiGrab = Value
        if v79_AntiGrab then
            task.spawn(function()
                while v79_AntiGrab and task.wait() do
                    if LP:FindFirstChild("IsHeld") and LP.IsHeld.Value == true then
                        local hrp = LP.Character and LP.Character:FindFirstChild("HumanoidRootPart")
                        if hrp then
                            hrp.Anchored = true
                            while LP.IsHeld.Value == true and v79_AntiGrab do
                                ReplicatedStorage.CharacterEvents.Struggle:FireServer(LP)
                                task.wait(0.001)
                            end
                            hrp.Anchored = false
                        end
                    end
                end
            end)
        end
    end
})

ProtTab:CreateToggle({
    Name = "Anti Explode рџ’Ј",
    CurrentValue = false,
    Callback = function(Value)
        v84_AntiExplode = Value
        if v84_AntiExplode then
            workspace.ChildAdded:Connect(function(obj)
                if obj:IsA("Part") and obj.Name == "Part" and v84_AntiExplode then
                    local char = LP.Character
                    local hrp = char and char:FindFirstChild("HumanoidRootPart")
                    local rArm = char and char:FindFirstChild("Right Arm")
                    if hrp and rArm and (obj.Position - hrp.Position).Magnitude <= 20 then
                        hrp.Anchored = true
                        task.wait(0.01)
                        hrp.Anchored = false
                    end
                end
            end)
        end
    end
})

ProtTab:CreateToggle({
    Name = "Anti Fire рџ”Ґ",
    CurrentValue = false,
    Callback = function(Value)
        local hole = workspace:FindFirstChild("Map") and workspace.Map:FindFirstChild("Hole") and workspace.Map.Hole.PoisonBigHole.ExtinguishPart
        if not hole then return end
        local originalPos = hole.Position
        if Value then
            _G.FireLoop = RunService.Heartbeat:Connect(function()
                local hrp = LP.Character and LP.Character:FindFirstChild("HumanoidRootPart")
                if hrp and (hrp:FindFirstChild("FireLight") or hrp:FindFirstChild("FireParticleEmitter")) then
                    hole.CFrame = CFrame.new(hrp.Position)
                else
                    hole.CFrame = CFrame.new(originalPos)
                end
            end)
        else
            if _G.FireLoop then _G.FireLoop:Disconnect() end
            hole.CFrame = CFrame.new(originalPos)
        end
    end
})

ProtTab:CreateSection("Optimisation")

ProtTab:CreateToggle({
    Name = "Anti Lag",
    CurrentValue = false,
    Callback = function(Value)
        antiLagT = Value
        local scripts = LP:FindFirstChild("PlayerScripts")
        local beam = scripts and scripts:FindFirstChild("CharacterAndBeamMove")
        if beam then beam.Disabled = antiLagT end
    end
})

Rayfield:Notify({Title = "OverLoad Ready", Content = "SystГЁmes de protection injectГ©s !", Duration = 5})

-- ==========================================
-- ONGLET ESP ULTRA-COMPLET (FIX JOUEURS)
-- ==========================================
local ESPTab = Window:CreateTab("ESP", 4483362458)

local ESP_Enabled = false
local ESP_ShowNames = false
local ESP_Rainbow = false
local ESP_Color = Color3.fromRGB(0, 255, 100)

-- // MOTEUR DE GГ‰NГ‰RATION ESP //

local function ApplyESP(player)
    if player == LP then return end -- Ne pas mettre d'ESP sur soi-mГЄme

    local function Setup(character)
        if not character then return end
        
        -- Attente du chargement complet des membres
        local hrp = character:WaitForChild("HumanoidRootPart", 10)
        local head = character:WaitForChild("Head", 10)
        if not hrp or not head then return end

        -- Nettoyage si un ancien ESP existe (Г©vite les doublons)
        if character:FindFirstChild("Gemini_ESP") then character.Gemini_ESP:Destroy() end
        if character:FindFirstChild("Gemini_NameTag") then character.Gemini_NameTag:Destroy() end

        -- 1. Silhouette (Highlight)
        local highlight = Instance.new("Highlight")
        highlight.Name = "Gemini_ESP"
        highlight.Parent = character
        highlight.FillTransparency = 0.5
        highlight.OutlineTransparency = 0
        highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        
        -- 2. Billboard (Pseudo + Image de Profil)
        local bill = Instance.new("BillboardGui", character)
        bill.Name = "Gemini_NameTag"
        bill.AlwaysOnTop = true
        bill.Size = UDim2.new(0, 100, 0, 100)
        bill.ExtentsOffset = Vector3.new(0, 4, 0)
        
        -- Photo de profil ronde
        local headshot = Instance.new("ImageLabel", bill)
        headshot.BackgroundTransparency = 1
        headshot.Size = UDim2.new(0, 40, 0, 40)
        headshot.Position = UDim2.new(0.5, -20, 0, 0)
        headshot.Image = "rbxthumb://type=AvatarHeadShot&id=" .. player.UserId .. "&w=150&h=150"
        local corner = Instance.new("UICorner", headshot)
        corner.CornerRadius = UDim.new(1, 0)

        -- Nom d'affichage
        local label = Instance.new("TextLabel", bill)
        label.BackgroundTransparency = 1
        label.Position = UDim2.new(0, 0, 0, 45)
        label.Size = UDim2.new(1, 0, 0, 20)
        label.Text = player.DisplayName or player.Name
        label.Font = Enum.Font.GothamBold
        label.TextSize = 13
        label.TextStrokeTransparency = 0
        label.TextColor3 = Color3.new(1,1,1)

        -- // BOUCLE DE MISE ГЂ JOUR (COULEURS ET VISIBILITГ‰) //
        task.spawn(function()
            local hue = 0
            while character and character.Parent do
                hue = hue + 0.01
                local currentCol = ESP_Rainbow and Color3.fromHSV(hue % 1, 0.7, 1) or ESP_Color
                
                -- VisibilitГ© globale
                highlight.Enabled = ESP_Enabled
                highlight.FillColor = currentCol
                highlight.OutlineColor = currentCol
                
                -- VisibilitГ© Pseudos
                bill.Enabled = (ESP_Enabled and ESP_ShowNames)
                label.TextColor3 = currentCol
                
                task.wait(0.05)
            end
        end)
    end

    -- Surveille les futurs spawns du joueur
    player.CharacterAdded:Connect(Setup)
    -- Applique immГ©diatement si le personnage existe dГ©jГ 
    if player.Character then Setup(player.Character) end
end

-- // INITIALISATION GГ‰NГ‰RALE //

-- Scan de tous les joueurs dГ©jГ  prГ©sents
for _, p in pairs(game.Players:GetPlayers()) do
    ApplyESP(p)
end

-- DГ©tection des nouveaux joueurs qui arrivent
game.Players.PlayerAdded:Connect(ApplyESP)

-- // INTERFACE RAYFIELD //

ESPTab:CreateToggle({
    Name = "Activer l'ESP (Tous les joueurs)",
    CurrentValue = false,
    Flag = "esp_active",
    Callback = function(v) ESP_Enabled = v end
})

ESPTab:CreateToggle({
    Name = "Afficher Pseudos & Photos",
    CurrentValue = false,
    Flag = "esp_names",
    Callback = function(v) ESP_ShowNames = v end
})

ESPTab:CreateToggle({
    Name = "рџЊ€ Mode Arc-en-ciel",
    CurrentValue = false,
    Flag = "esp_rainbow",
    Callback = function(v) ESP_Rainbow = v end
})

ESPTab:CreateColorPicker({
    Name = "Couleur de l'ESP",
    Color = Color3.fromRGB(0, 255, 100),
    Flag = "esp_color",
    Callback = function(v) ESP_Color = v end
})

ESPTab:CreateButton({
    Name = "FORCE REFRESH (Si bug)",
    Callback = function()
        for _, p in pairs(game.Players:GetPlayers()) do
            ApplyESP(p)
        end
        Rayfield:Notify({Title = "ESP System", Content = "RafraГ®chissement forcГ© effectuГ©", Duration = 2})
    end
})

-- ==========================================
-- CRГ‰ATION DE L'ONGLET BLOBMAN (CIBLE UNIQUE)
-- ==========================================
local BlobmanTab = Window:CreateTab("Blobman / Sniper", 6031091005)

-- Variables locales
local LP = game.Players.LocalPlayer
local SelectedTargetPlayer = nil -- On stocke directement l'objet joueur
local BlobmanLoopActive = false
local blobalter = 1

-- // FONCTIONS DE DГ‰TECTION //

local function getPlayersForDropdown()
    local tbl = {}
    for _, p in pairs(game.Players:GetPlayers()) do
        if p ~= LP then table.insert(tbl, p.Name) end
    end
    return tbl
end

local function findCurrentBlobman()
    if not LP.Character then return nil end
    for _, v in pairs(workspace:GetDescendants()) do
        if v.Name == "CreatureBlobman" and v:FindFirstChild("VehicleSeat") then
            local seat = v.VehicleSeat
            if seat.Occupant and seat.Occupant.Parent == LP.Character then
                return v
            end
        end
    end
    return nil
end

-- // LOGIQUE D'ATTAQUE //

local function performGrab(targetPlayer, bman)
    if not targetPlayer or not targetPlayer.Character or not targetPlayer.Character:FindFirstChild("HumanoidRootPart") then return end
    local hrp = targetPlayer.Character.HumanoidRootPart
    
    pcall(function()
        local scriptBase = bman:FindFirstChild("BlobmanSeatAndOwnerScript")
        if not scriptBase then return end
        
        local remote = scriptBase:FindFirstChild("CreatureGrab")
        if not remote then return end
        
        local detectorName = (blobalter == 1) and "RightDetector" or "LeftDetector"
        local weldName = (blobalter == 1) and "RightWeld" or "LeftWeld"
        
        local detector = bman:FindFirstChild(detectorName)
        if detector then
            remote:FireServer(detector, hrp, detector:FindFirstChild(weldName))
        end
        blobalter = (blobalter == 1) and 2 or 1
    end)
end

-- // INTERFACE DE L'ONGLET //

BlobmanTab:CreateSection("SГ©lection de la Cible")

local TargetDropdown = BlobmanTab:CreateDropdown({
    Name = "Choisir la victime",
    Options = getPlayersForDropdown(),
    CurrentValue = "",
    Callback = function(Option)
        local name = type(Option) == "table" and Option[1] or Option
        SelectedTargetPlayer = game.Players:FindFirstChild(name)
        if SelectedTargetPlayer then
            Rayfield:Notify({Title = "Cible VerrouillГ©e", Content = "Focus sur : " .. name, Duration = 2})
        end
    end,
})

BlobmanTab:CreateButton({
    Name = "RafraГ®chir les joueurs",
    Callback = function()
        TargetDropdown:Refresh(getPlayersForDropdown(), true)
    end
})

---

BlobmanTab:CreateSection("Actions de Combat")

BlobmanTab:CreateButton({
    Name = "Se tГ©lГ©porter derriГЁre la cible",
    Callback = function()
        if SelectedTargetPlayer and SelectedTargetPlayer.Character and SelectedTargetPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local myHRP = LP.Character:FindFirstChild("HumanoidRootPart")
            if myHRP then
                -- TP Г  3 studs derriГЁre la cible
                myHRP.CFrame = SelectedTargetPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
            end
        else
            Rayfield:Notify({Title = "Erreur", Content = "Cible introuvable ou non sГ©lectionnГ©e", Duration = 2})
        end
    end
})

BlobmanTab:CreateToggle({
    Name = "AUTO-KICK (Cible Unique)",
    CurrentValue = false,
    Flag = "blob_kick_single",
    Callback = function(Value)
        BlobmanLoopActive = Value
        if Value then
            task.spawn(function()
                while BlobmanLoopActive do
                    local bman = findCurrentBlobman()
                    
                    if bman and SelectedTargetPlayer then
                        -- On attaque la cible sГ©lectionnГ©e en boucle
                        performGrab(SelectedTargetPlayer, bman)
                        task.wait(0.01) -- Vitesse max
                    elseif not bman then
                        -- On attend d'ГЄtre sur un Blobman
                        task.wait(1)
                    else
                        -- Pas de cible choisie
                        task.wait(0.5)
                    end
                end
            end)
        end
    end
})

-- // VARIABLES DE CONTRГ”LE GUCCI //
local GucciConfig = {
    enabled = false,
    ragdollConn = nil,
    isSitting = false
}

local function runGucciSetup()
    -- On invoque le Blobman dans le ciel
    game:GetService("ReplicatedStorage").MenuToys.SpawnToyRemoteFunction:InvokeServer(
        "CreatureBlobman", 
        CFrame.new(0, 50000, 0) * CFrame.Angles(-0.7351, 0.9028, 0.6173), 
        Vector3.new(0, 59.667, 0)
    )
    
    local LP = game.Players.LocalPlayer
    local Char = LP.Character or LP.CharacterAdded:Wait()
    local Hum = Char:WaitForChild("Humanoid")
    local HRP = Char:WaitForChild("HumanoidRootPart")
    local OldPos = HRP.Position
    
    task.wait(0.3)
    local toyFolder = workspace:FindFirstChild(LP.Name .. "SpawnedInToys")
    local bman = toyFolder and toyFolder:FindFirstChild("CreatureBlobman")
    
    if bman then
        local head = bman:FindFirstChild("Head")
        local seat = bman:FindFirstChild("VehicleSeat")
        
        if head then
            head.CFrame = CFrame.new(0, 50000, 0)
            head.Anchored = true
        end
        
        if seat and seat:IsA("VehicleSeat") then
            HRP.CFrame = seat.CFrame + Vector3.new(0, 2, 0)
            seat:Sit(Hum)
            GucciConfig.isSitting = true
        end
    end
    
    -- Retour automatique au sol quand on saute
    local jumpConn
    jumpConn = Hum:GetPropertyChangedSignal("Jump"):Connect(function()
        if GucciConfig.isSitting and Hum.Jump then
            task.wait(0.02)
            HRP.CFrame = CFrame.new(OldPos)
            GucciConfig.isSitting = false
            jumpConn:Disconnect()
        end
    end)
    
    -- Boucle Ragdoll permanente (Mode God)
    if GucciConfig.ragdollConn then GucciConfig.ragdollConn:Disconnect() end
    GucciConfig.ragdollConn = game:GetService("RunService").Heartbeat:Connect(function()
        if GucciConfig.enabled and GucciConfig.isSitting then
            pcall(function()
                game:GetService("ReplicatedStorage").CharacterEvents.RagdollRemote:FireServer(HRP, 0)
            end)
        end
    end)
end

-- // TON TOGGLE DANS PROTTAB //
ProtTab:CreateToggle({
    Name = "Gucci",
    CurrentValue = false,
    Flag = "gucci_toggle", 
    Callback = function(Value)
        GucciConfig.enabled = Value
        if Value then
            runGucciSetup()
        else
            -- DГ©sactivation et nettoyage
            if GucciConfig.ragdollConn then 
                GucciConfig.ragdollConn:Disconnect() 
                GucciConfig.ragdollConn = nil
            end
            GucciConfig.isSitting = false
        end
    end,
})
